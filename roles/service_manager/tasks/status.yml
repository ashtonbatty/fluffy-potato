---
- name: "Check {{ service_name }} status"
  ansible.builtin.shell: "{{ service_script }} status"
  register: status_result
  failed_when: false
  become: "{{ service_become }}"
  become_user: "{{ service_become_user }}"
  become_flags: "{{ service_become_flags }}"

- name: "Display {{ service_name }} status"
  ansible.builtin.debug:
    msg:
      - "Service: {{ service_name }}"
      - "Status output: {{ status_result.stdout }}"
      - "Return code: {{ status_result.rc }}"
      - "Running: {{ 'Yes' if running_check_string in status_result.stdout else 'No' }}"
      - "Stopped: {{ 'Yes' if stopped_check_string in status_result.stdout else 'No' }}"
